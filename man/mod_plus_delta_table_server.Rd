% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mod_plus_delta_table.R
\name{mod_plus_delta_table_server}
\alias{mod_plus_delta_table_server}
\title{Plus/Delta Table Module Server}
\usage{
mod_plus_delta_table_server(id, rdm_data, record_id)
}
\arguments{
\item{id}{Character string. Module namespace ID that must match the UI function.}

\item{rdm_data}{Reactive expression returning a data frame. The complete RDM 2.0
dataset containing assessment records. Must include the following columns:
\itemize{
\item \code{record_id} - Unique resident identifier
\item \code{redcap_repeat_instrument} - REDCap instrument type
\item \code{redcap_repeat_instance} - REDCap repeat instance number
\item \code{ass_date} - Assessment date
\item \code{ass_level} - Assessment level (Intern, PGY2, etc.)
\item \code{ass_plus} - Positive feedback text
\item \code{ass_delta} - Areas for improvement text
\item \code{ass_faculty} - Evaluating faculty name
\item \code{ass_specialty} - Department/specialty
}}

\item{record_id}{Reactive expression returning a character string. The record_id
of the resident whose assessments should be displayed. When this changes,
the table will automatically update to show the new resident's data.}
}
\value{
A named list containing reactive expressions:
\describe{
\item{\code{data}}{Reactive data frame with processed plus/delta records}
\item{\code{summary}}{Reactive list with summary statistics:
\itemize{
\item \code{total_entries} - Number of assessment records
\item \code{plus_count} - Number of records with plus feedback
\item \code{delta_count} - Number of records with delta feedback
\item \code{faculty_count} - Number of unique faculty members
}
}
}
}
\description{
Server-side logic for the plus/delta table module. This function processes
RDM 2.0 assessment data to extract, clean, and display plus/delta feedback
for a selected resident. It handles data filtering, formatting, and provides
reactive summary statistics.
}
\details{
The server function performs the following operations:
\enumerate{
\item Filters data by the provided record_id
\item Extracts assessment records (redcap_repeat_instrument = "Assessment")
\item Includes only records with non-empty plus or delta feedback
\item Formats and cleans all display fields
\item Renders a styled datatable with custom formatting
\item Provides reactive summary statistics
}

The module expects assessment data to follow the RDM 2.0 structure where:
\itemize{
\item Each resident has a unique \code{record_id}
\item Assessment records are marked with \code{redcap_repeat_instrument = "Assessment"}
\item Plus and delta feedback are stored in separate fields
\item Missing or empty values are handled gracefully with "Not specified" or "Not provided" defaults
}

The rendered datatable includes:
\itemize{
\item Date formatting (MM/DD/YYYY)
\item Color-coded columns (green for Plus, orange for Delta, purple for Level)
\item Sortable columns with date sorting (newest first by default)
\item Responsive design with horizontal scrolling when needed
\item Consistent gmed package styling
}
}
\examples{
\dontrun{
# Basic server usage
server <- function(input, output, session) {
  # Your data loading logic
  assessment_data <- reactive({
    # Load your RDM 2.0 data
  })
  
  # Selected resident
  selected_resident_id <- reactive(input$resident_selector)
  
  # Call the module
  feedback_results <- mod_plus_delta_table_server(
    "resident_feedback",
    rdm_data = assessment_data,
    record_id = selected_resident_id
  )
  
  # Access summary statistics
  observe({
    summary <- feedback_results$summary()
    cat("Total assessments:", summary$total_entries, "\n")
  })
}
}

}
\seealso{
\code{\link{mod_plus_delta_table_ui}} for the corresponding UI function

\code{\link{create_gmed_datatable}} for the underlying table creation function

Other plus_delta_modules: 
\code{\link{mod_plus_delta_table_ui}()}
}
\concept{plus_delta_modules}
